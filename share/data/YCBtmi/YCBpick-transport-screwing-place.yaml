- 
  taskName: "screw fastening with a bit (YCB screw)"
  comment: "The robot fastens a screw with a bit included in YCB airplane kit.|A handle is attached to the driver bit. The handle has hexagonal shape so it is grasped with the same hand as the screw.||The robot gropes the screw head to avoid  getting stuck.|The hexagonal shape and proper grasping force and friction enables to fasten up the screw by slipping."
  initialize: ""
  models: 
    - 
      name: "bit"
      rname: "bit"
      type: Env.
      file_name: "driver_tipHrp.wrl"
      pos_x: 0.448
      pos_y: -0.142
      pos_z: 0.773
      rot_x: 0
      rot_y: -0
      rot_z: 0
    - 
      name: "screw"
      rname: "screw"
      type: Env.
      file_name: "boltHrp.wrl"
      pos_x: 0.449
      pos_y: 0.067
      pos_z: 0.9215
      rot_x: -3.97569335e-16
      rot_y: -10
      rot_z: -20
  states: 
    - 
      id: 705
      type: 1
      condition: ""
      pos_x: -68
      pos_y: -211
    - 
      id: 706
      type: 2
      condition: ""
      pos_x: 252.00931
      pos_y: 492.387421
    - 
      id: 707
      type: 5
      cmd_name: "goInitial"
      disp_name: "Initial Pose"
      condition: ""
      pos_x: 34
      pos_y: -207
      arguments: 
        - 
          seq: 1
          name: "tm"
          value: "3.0"
    - 
      id: 708
      type: 5
      cmd_name: "moveArm"
      disp_name: "approach position"
      condition: ""
      pos_x: -24.857271
      pos_y: -147.762667
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(bit_pose) + rotFromRpy(rpy(bit_pose)) * (xyz(grasp_pose) + [0,0,0.05])"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(bit_pose)) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "2.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 709
      type: 5
      cmd_name: "moveArm"
      disp_name: "grasp position"
      condition: ""
      pos_x: -8
      pos_y: -111
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(bit_pose) + rotFromRpy(rpy(bit_pose))*xyz(grasp_pose)"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(bit_pose)) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "1.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 710
      type: 5
      cmd_name: "moveGripper"
      disp_name: "pre-grasp"
      condition: ""
      pos_x: 81.4766105
      pos_y: -75.9527725
      arguments: 
        - 
          seq: 1
          name: "width"
          value: "0.028"
        - 
          seq: 2
          name: "tm"
          value: "1.0"
        - 
          seq: 3
          name: "gripperID"
          value: "handID"
    - 
      id: 711
      type: 5
      cmd_name: "moveGripper"
      disp_name: "grasp a bit"
      condition: ""
      pos_x: 111.969675
      pos_y: -34.9905234
      model_actions: 
        - 
          action: "attach"
          model: "bit"
          target: "handID"
      arguments: 
        - 
          seq: 1
          name: "width"
          value: "0.017"
        - 
          seq: 2
          name: "tm"
          value: "1.0"
        - 
          seq: 3
          name: "gripperID"
          value: "handID"
    - 
      id: 712
      type: 5
      cmd_name: "moveArm"
      disp_name: "pick-up position"
      condition: ""
      pos_x: 61.6949724
      pos_y: -6.16949724
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(bit_pose) + rotFromRpy(rpy(bit_pose)) * (xyz(grasp_pose) + [0,0,0.05])"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(bit_pose)) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "1.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 713
      type: 5
      cmd_name: "moveArm"
      disp_name: "waypoint1"
      condition: ""
      pos_x: -11.6635078
      pos_y: 25.6597172
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(waypoint1)"
        - 
          seq: 2
          name: "rpy"
          value: "rpy(waypoint1)"
        - 
          seq: 3
          name: "tm"
          value: "2.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 714
      type: 5
      cmd_name: "moveArm"
      disp_name: "approach position"
      condition: ""
      pos_x: -58.317539
      pos_y: 55.9848374
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * ([0,0,screw_length+0.05] + xyz(grasp_pose))"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy([0,0,120]) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "3.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 716
      type: 5
      cmd_name: "moveArm"
      disp_name: "contact with the screw 1"
      condition: ""
      pos_x: 63.524137
      pos_y: 87.0004485
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * ([0,0,screw_length] + xyz(grasp_pose))"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy([0,0,90]) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "3.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 717
      type: 5
      cmd_name: "moveArm"
      disp_name: "rotate 1"
      condition: ""
      pos_x: 108.745034
      pos_y: 124.909836
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * ([0,0,screw_length-0.002] + xyz(grasp_pose))"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy([0,0,-60]) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "3.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 718
      type: 5
      cmd_name: "moveArm"
      disp_name: "release 1"
      condition: ""
      pos_x: 81.6445546
      pos_y: 179.61802
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * ([0,0,screw_length+0.02] + xyz(grasp_pose))"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy([0,0,-60]) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "2.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 719
      type: 5
      cmd_name: "moveArm"
      disp_name: "rotate back 1"
      condition: ""
      pos_x: 27.61919
      pos_y: 203.001047
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * ([0,0,screw_length+0.02] + xyz(grasp_pose))"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy([0,0,120]) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "4.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 720
      type: 5
      cmd_name: "moveArm"
      disp_name: "contact with the screw 2"
      condition: ""
      pos_x: 68.2050687
      pos_y: 248.018432
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * ([0,0,screw_length-0.002] + xyz(grasp_pose))"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy([0,0,120]) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "4.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 721
      type: 5
      cmd_name: "moveArm"
      disp_name: "rotate 2"
      condition: ""
      pos_x: 2.33270156
      pos_y: 279.924187
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * ([0,0,screw_length-0.005] + xyz(grasp_pose))"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy([0,0,-60]) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "4.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 722
      type: 5
      cmd_name: "moveArm"
      disp_name: "release 2"
      condition: ""
      pos_x: 88.381408
      pos_y: 309.334928
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * ([0,0,screw_length+0.02] + xyz(grasp_pose))"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy([0,0,-60]) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "2.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 723
      type: 5
      cmd_name: "moveArm"
      disp_name: "waypoint1"
      condition: ""
      pos_x: 47.123502
      pos_y: 348.465897
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(waypoint1)"
        - 
          seq: 2
          name: "rpy"
          value: "rpy(waypoint1)"
        - 
          seq: 3
          name: "tm"
          value: "3.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 724
      type: 5
      cmd_name: "moveArm"
      disp_name: "approach position"
      condition: ""
      pos_x: 83.7630666
      pos_y: 373.259981
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(bit_pose) + rotFromRpy(rpy(bit_pose)) * (xyz(grasp_pose) + [0,0,0.05])"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(bit_pose)) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "2.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 725
      type: 5
      cmd_name: "moveArm"
      disp_name: "approach position"
      condition: ""
      pos_x: -66.1287368
      pos_y: 458.492575
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(bit_pose) + rotFromRpy(rpy(bit_pose)) * (xyz(grasp_pose) + [0,0,0.05])"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(bit_pose)) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "2.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 726
      type: 5
      cmd_name: "moveGripper"
      disp_name: "release bit"
      condition: ""
      pos_x: 126.379364
      pos_y: 451.144938
      model_actions: 
        - 
          action: "detach"
          model: "bit"
          target: "handID"
      arguments: 
        - 
          seq: 1
          name: "width"
          value: "0.05"
        - 
          seq: 2
          name: "tm"
          value: "0.5"
        - 
          seq: 3
          name: "gripperID"
          value: "handID"
    - 
      id: 727
      type: 5
      cmd_name: "moveArm"
      disp_name: "release bit position"
      condition: ""
      pos_x: 11.6635078
      pos_y: 412.888176
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(bit_pose) + rotFromRpy(rpy(bit_pose))*xyz(grasp_pose)"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(bit_pose)) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "2.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 776
      type: 5
      cmd_name: "moveArm"
      disp_name: "a little above contact"
      condition: ""
      pos_x: -120.501254
      pos_y: 104.336451
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * ([0,0,screw_length+0.005] + xyz(grasp_pose))"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy([0,0,120]) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "3.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 777
      type: 5
      cmd_name: "moveArm"
      disp_name: "rotate back a little"
      condition: ""
      pos_x: -2.93905497
      pos_y: 160.178496
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * ([0,0,screw_length+0.002] + xyz(grasp_pose))"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy([0,0,105]) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "2.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 778
      type: 5
      cmd_name: "moveArm"
      disp_name: "rotate a little"
      condition: ""
      pos_x: -105.805979
      pos_y: 217.490068
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: "xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * ([0,0,screw_length] + xyz(grasp_pose))"
        - 
          seq: 2
          name: "rpy"
          value: "rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy([0,0,90]) * rotFromRpy(rpy(grasp_pose)))"
        - 
          seq: 3
          name: "tm"
          value: "2.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
  transitions: 
    - 
      source_id: 705
      target_id: 707
    - 
      source_id: 707
      target_id: 708
    - 
      source_id: 708
      target_id: 709
    - 
      source_id: 709
      target_id: 710
    - 
      source_id: 710
      target_id: 711
    - 
      source_id: 711
      target_id: 712
    - 
      source_id: 712
      target_id: 713
    - 
      source_id: 713
      target_id: 714
    - 
      source_id: 716
      target_id: 717
    - 
      source_id: 717
      target_id: 718
    - 
      source_id: 718
      target_id: 719
    - 
      source_id: 719
      target_id: 720
    - 
      source_id: 720
      target_id: 721
    - 
      source_id: 721
      target_id: 722
    - 
      source_id: 722
      target_id: 723
    - 
      source_id: 723
      target_id: 724
    - 
      source_id: 724
      target_id: 727
    - 
      source_id: 727
      target_id: 726
    - 
      source_id: 726
      target_id: 725
    - 
      source_id: 725
      target_id: 706
    - 
      source_id: 714
      target_id: 776
    - 
      source_id: 777
      target_id: 716
    - 
      source_id: 776
      target_id: 778
    - 
      source_id: 778
      target_id: 777
  parameters: 
    - 
      name: "hand selection (0=left, 1=right)"
      rname: "handID"
      type: 0
      model_name: ""
      units: ""
      elem_num: 1
      elem_type: 1
      values: "1"
    - 
      name: "bit pose"
      rname: "bit_pose"
      type: 1
      model_name: "bit"
      units: ""
      elem_num: 6
      elem_type: 0
      values: "0.4480, -0.1420, 0.7730, 0.0000, 0.0000, 0.0000"
    - 
      name: "grasp pose"
      rname: "grasp_pose"
      type: 0
      model_name: ""
      units: ""
      elem_num: 6
      elem_type: 0
      values: "0, 0, 0.18, 0, -90, 0"
    - 
      name: "screw pose"
      rname: "screw_pose"
      type: 1
      model_name: "screw"
      units: ""
      elem_num: 6
      elem_type: 0
      values: "0.4490, 0.0670, 0.9215, -0.0000, -10.0000, -20.0000"
    - 
      name: "screw length"
      rname: "screw_length"
      type: 0
      model_name: ""
      units: ""
      elem_num: 1
      elem_type: 0
      values: "0.0"
    - 
      name: "waypoint1"
      rname: "waypoint1"
      type: 0
      model_name: ""
      units: ""
      elem_num: 6
      elem_type: 0
      values: "0.4, -0.1, 1.14, 0, -90, 0"
  files: 
    - 
      name: "fasten_by_slipping.mp4"
    - 
      name: "grope_screw_head.mp4"
    - 
      name: "finger_attachments.stl"
    - 
      name: "driver_bit_handle.stl"
  images: 
    - 
      name: "feeder.png"
    - 
      name: "bit_handle.png"
