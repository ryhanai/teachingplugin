- 
  taskName: "レールのボルト締め２"
  comment: "レールを固定する（ボルト２本目）"
  models: 
    - 
      name: "rail"
      rname: "cover"
      type: Work
      file_name: "SEBZ16-150_railHrp.wrl"
      pos_x: 0.415
      pos_y: 0
      pos_z: 0.895
      rot_x: 90
      rot_y: -0
      rot_z: 45
    - 
      name: "bolt"
      rname: "screw"
      type: Work
      file_name: "CBM3-10Hrp.wrl"
      pos_x: 0.449874
      pos_y: -0.2
      pos_z: 0.885
      rot_x: -0.007393
      rot_y: 0.034967
      rot_z: -0.001747
    - 
      name: "screw feeder"
      rname: ""
      type: Env.
      file_name: "screw_feederHrp.wrl"
      pos_x: 0.496
      pos_y: -0.245
      pos_z: 0.81
      rot_x: 0
      rot_y: 0
      rot_z: 135
  states: 
    - 
      id: 11
      type: 1
      pos_x: 47.9402326
      pos_y: 52.6173284
    - 
      id: 12
      type: 5
      cmd_name: "moveArm"
      pos_x: 75
      pos_y: 95
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * (xyz(tool_pose) + rotFromRpy(rpy(tool_pose)) * [0.05,0,0]) "
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "1.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 13
      type: 5
      cmd_name: "moveArm"
      pos_x: 99
      pos_y: 140
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * xyz(tool_pose) "
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "0.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 14
      type: 5
      cmd_name: "moveArm"
      pos_x: 126
      pos_y: 180
      model_actions: 
        - 
          action: "attach"
          model: "screw"
          target: "toolID"
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * xyz(tool_pose) "
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "0.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 15
      type: 5
      cmd_name: "moveArm"
      pos_x: 97
      pos_y: 213
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * (xyz(tool_pose) + rotFromRpy(rpy(tool_pose)) * [0.05,0,0]) "
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "0.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 16
      type: 5
      cmd_name: "moveArm"
      pos_x: 68
      pos_y: 247
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(parts_poseP) + rotFromRpy(rpy(parts_poseP)) * (xyz(hole_pose) + rotFromRpy(rpy(hole_pose)) * (xyz(tool_pose) + [0,0,screw_length+0.05]))"
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(parts_poseP)) * rotFromRpy(rpy(hole_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "1.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 17
      type: 5
      cmd_name: "moveArm"
      pos_x: 96
      pos_y: 280
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(parts_poseP) + rotFromRpy(rpy(parts_poseP)) * (xyz(hole_pose) + rotFromRpy(rpy(hole_pose)) * (xyz(tool_pose) + [0,0,screw_length])))"
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(parts_poseP)) * rotFromRpy(rpy(hole_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "0.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 18
      type: 5
      cmd_name: "moveArm"
      pos_x: 129
      pos_y: 315
      model_actions: 
        - 
          action: "detach"
          model: "screw"
          target: "toolID"
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(parts_poseP) + rotFromRpy(rpy(parts_poseP)) * (xyz(hole_pose) + rotFromRpy(rpy(hole_pose)) * xyz(tool_pose))"
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(parts_poseP)) * rotFromRpy(rpy(hole_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "1.2"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 19
      type: 5
      cmd_name: "moveArm"
      pos_x: 157
      pos_y: 352
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(parts_poseP) + rotFromRpy(rpy(parts_poseP)) * (xyz(hole_pose) + rotFromRpy(rpy(hole_pose)) * (xyz(tool_pose) + [0,0,0.05]))"
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(parts_poseP)) * rotFromRpy(rpy(hole_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "0.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 20
      type: 2
      pos_x: 197.423912
      pos_y: 394.847824
  transactions: 
    - 
      source_id: 20
      target_id: 20
    - 
      source_id: 11
      target_id: 12
    - 
      source_id: 12
      target_id: 13
    - 
      source_id: 13
      target_id: 14
    - 
      source_id: 14
      target_id: 15
    - 
      source_id: 15
      target_id: 16
    - 
      source_id: 16
      target_id: 17
    - 
      source_id: 17
      target_id: 18
    - 
      source_id: 18
      target_id: 19
    - 
      source_id: 19
      target_id: 20
  parameters: 
    - 
      name: "ネジ供給位置:xyz[m]RPY[deg]"
      rname: "screw_pose"
      type: 1
      model_name: "screw"
      units: ""
      elem_num: 6
      elem_type: ""
      values: "0.4499, -0.2000, 0.8850, -0.0074, 0.0350, -0.0017"
    - 
      name: "組付け対象物位置:xyz[m]RPY[deg]"
      rname: "parts_poseP"
      type: 1
      model_name: "cover"
      units: ""
      elem_num: 6
      elem_type: ""
      values: "0.4150, 0.0000, 0.8950, 90.0000, 0.0000, 45.0000"
    - 
      name: "ネジ穴オフセット:xyz[m]RPY[deg]"
      rname: "hole_pose"
      type: 0
      model_name: ""
      units: ""
      elem_num: 6
      elem_type: ""
      values: "0.0, 0.005, -0.06, -90.0000, 0.0000, 0.0000"
    - 
      name: "ネジ締めトルク[Nm]"
      rname: "torque_threshold"
      type: 0
      model_name: ""
      units: ""
      elem_num: 1
      elem_type: ""
      values: "0.6300"
    - 
      name: "ネジ長[m]"
      rname: "screw_length"
      type: 0
      model_name: ""
      units: ""
      elem_num: 1
      elem_type: ""
      values: "0.0100"
    - 
      name: "ツール選択（1のみ）"
      rname: "toolID"
      type: 0
      model_name: ""
      units: ""
      elem_num: 1
      elem_type: "int"
      values: "2"
    - 
      name: "ハンド選択（left=0,right=1）"
      rname: "handID"
      type: 0
      model_name: ""
      units: ""
      elem_num: 1
      elem_type: "int"
      values: "1"
    - 
      name: "ツールオフセット:xyz[m]RPY[deg]"
      rname: "tool_pose"
      type: 0
      model_name: ""
      units: ""
      elem_num: 6
      elem_type: ""
      values: "0.0015, 0.08, 0.1240, , -90, 0"
