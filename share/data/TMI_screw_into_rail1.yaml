- 
  taskName: "レールのボルト締め１"
  comment: "レールを固定する（ボルト１本目）"
  models: 
    - 
      name: "rail"
      rname: "cover"
      type: Work
      file_name: "SEBZ16-150_railHrp.wrl"
      pos_x: 0.415
      pos_y: 0
      pos_z: 0.895
      rot_x: 90
      rot_y: -0
      rot_z: 45
    - 
      name: "bolt"
      rname: "screw"
      type: Work
      file_name: "CBM3-10Hrp.wrl"
      pos_x: 0.450052
      pos_y: -0.2
      pos_z: 0.885
      rot_x: -0.053953
      rot_y: -0.010861
      rot_z: 0.020373
    - 
      name: "screw feeder"
      rname: ""
      type: Env.
      file_name: "screw_feederHrp.wrl"
      pos_x: 0.496
      pos_y: -0.245
      pos_z: 0.81
      rot_x: 0
      rot_y: 0
      rot_z: 135
  states: 
    - 
      id: 1
      type: 1
      pos_x: 47.9402326
      pos_y: 52.6173284
    - 
      id: 2
      type: 5
      cmd_name: "moveArm"
      pos_x: 75
      pos_y: 95
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * (xyz(tool_pose) + rotFromRpy(rpy(tool_pose)) * [0.05,0,0]) "
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "1.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 3
      type: 5
      cmd_name: "moveArm"
      pos_x: 99
      pos_y: 140
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * xyz(tool_pose) "
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "0.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 4
      type: 5
      cmd_name: "moveArm"
      pos_x: 126
      pos_y: 180
      model_actions: 
        - 
          action: "attach"
          model: "screw"
          target: "toolID"
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * xyz(tool_pose) "
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "0.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 5
      type: 5
      cmd_name: "moveArm"
      pos_x: 97
      pos_y: 213
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(screw_pose) + rotFromRpy(rpy(screw_pose)) * (xyz(tool_pose) + rotFromRpy(rpy(tool_pose)) * [0.05,0,0]) "
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(screw_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "0.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 6
      type: 5
      cmd_name: "moveArm"
      pos_x: 68
      pos_y: 247
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(parts_poseP) + rotFromRpy(rpy(parts_poseP)) * (xyz(hole_pose) + rotFromRpy(rpy(hole_pose)) * (xyz(tool_pose) + [0,0,screw_length+0.05]))"
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(parts_poseP)) * rotFromRpy(rpy(hole_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "1.0"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 7
      type: 5
      cmd_name: "moveArm"
      pos_x: 96
      pos_y: 280
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(parts_poseP) + rotFromRpy(rpy(parts_poseP)) * (xyz(hole_pose) + rotFromRpy(rpy(hole_pose)) * (xyz(tool_pose) + [0,0,screw_length])))"
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(parts_poseP)) * rotFromRpy(rpy(hole_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "0.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 8
      type: 5
      cmd_name: "moveArm"
      pos_x: 129
      pos_y: 315
      model_actions: 
        - 
          action: "detach"
          model: "screw"
          target: "toolID"
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(parts_poseP) + rotFromRpy(rpy(parts_poseP)) * (xyz(hole_pose) + rotFromRpy(rpy(hole_pose)) * xyz(tool_pose))"
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(parts_poseP)) * rotFromRpy(rpy(hole_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "1.2"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 9
      type: 5
      cmd_name: "moveArm"
      pos_x: 157
      pos_y: 352
      arguments: 
        - 
          seq: 1
          name: "xyz"
          value: " xyz(parts_poseP) + rotFromRpy(rpy(parts_poseP)) * (xyz(hole_pose) + rotFromRpy(rpy(hole_pose)) * (xyz(tool_pose) + [0,0,0.05]))"
        - 
          seq: 2
          name: "rpy"
          value: " rpyFromRot(rotFromRpy(rpy(parts_poseP)) * rotFromRpy(rpy(hole_pose)) * rotFromRpy(rpy(tool_pose))) "
        - 
          seq: 3
          name: "tm"
          value: "0.5"
        - 
          seq: 4
          name: "armID"
          value: "handID"
    - 
      id: 10
      type: 2
      pos_x: 197.423912
      pos_y: 394.847824
  transactions: 
    - 
      source_id: 10
      target_id: 10
    - 
      source_id: 1
      target_id: 2
    - 
      source_id: 2
      target_id: 3
    - 
      source_id: 3
      target_id: 4
    - 
      source_id: 4
      target_id: 5
    - 
      source_id: 5
      target_id: 6
    - 
      source_id: 6
      target_id: 7
    - 
      source_id: 7
      target_id: 8
    - 
      source_id: 8
      target_id: 9
    - 
      source_id: 9
      target_id: 10
  parameters: 
    - 
      name: "ネジ供給位置:xyz[m]RPY[deg]"
      rname: "screw_pose"
      type: 1
      model_name: "screw"
      units: ""
      elem_num: 6
      elem_type: ""
      values: "0.4501, -0.2000, 0.8850, -0.0540, -0.0109, 0.0204"
    - 
      name: "組付け対象物位置:xyz[m]RPY[deg]"
      rname: "parts_poseP"
      type: 1
      model_name: "cover"
      units: ""
      elem_num: 6
      elem_type: ""
      values: "0.4150, 0.0000, 0.8950, 90.0000, 0.0000, 45.0000"
    - 
      name: "ネジ穴オフセット:xyz[m]RPY[deg]"
      rname: "hole_pose"
      type: 0
      model_name: ""
      units: ""
      elem_num: 6
      elem_type: ""
      values: "0.0, 0.005, 0.06, -90.0000, 0.0000, 0.0000"
    - 
      name: "ネジ締めトルク[Nm]"
      rname: "torque_threshold"
      type: 0
      model_name: ""
      units: ""
      elem_num: 1
      elem_type: ""
      values: "0.6300"
    - 
      name: "ネジ長[m]"
      rname: "screw_length"
      type: 0
      model_name: ""
      units: ""
      elem_num: 1
      elem_type: ""
      values: "0.0100"
    - 
      name: "ツール選択（1のみ）"
      rname: "toolID"
      type: 0
      model_name: ""
      units: ""
      elem_num: 1
      elem_type: "int"
      values: "2"
    - 
      name: "ハンド選択（left=0,right=1）"
      rname: "handID"
      type: 0
      model_name: ""
      units: ""
      elem_num: 1
      elem_type: "int"
      values: "1"
    - 
      name: "ツールオフセット:xyz[m]RPY[deg]"
      rname: "tool_pose"
      type: 0
      model_name: ""
      units: ""
      elem_num: 6
      elem_type: ""
      values: "0.0015, 0.08, 0.1240, , -90, 0"
